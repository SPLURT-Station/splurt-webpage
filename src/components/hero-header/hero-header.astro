---
import { getImage, Image } from "astro:assets";
import DiscordIcon from "~icons/ic/baseline-discord";
import bannerPoster from "/src/assets/backgrounds/banner.png";
import heroVideo from "/src/assets/hero-temp.mp4";
import logo from "/src/assets/logos/splurtlogo.png";
import "./hero-header.css";

const optimizedBannerPoster = await getImage({
	src: bannerPoster,
	width: 550,
	height: 273,
	format: "webp",
	quality: 80,
});
---

<header class="intro">
	<div class="relative z-30">
		<Image
			src={logo}
			alt="S.P.L.U.R.T. Station"
			class="logo max-w-full p-4"
			width={550}
			height={273}
			loading="eager"
		/>
		<div
			class="text-center mt-8 mx-4 flex flex-col sm:flex-row gap-4 justify-center items-center font-spess"
		>
			<a
				href="/how-to-play"
				class="cta--highlighted text-xl px-12 py-4 rounded-full text-white font-semibold uppercase tracking-normal transition-all inline-block no-underline cursor-pointer hover:-translate-y-0.5 active:translate-y-0"
			>
				Play Now
			</a>
			<a
				href="https://discord.gg/splurt"
				class="cta--discord text-xl px-12 py-4 rounded-full text-white font-semibold uppercase tracking-normal transition-all inline-flex items-center gap-2 no-underline cursor-pointer hover:-translate-y-0.5 active:translate-y-0"
				target="_blank"
				rel="noopener external"
			>
				Discord
				<DiscordIcon
					class="discord-icon"
					width={20}
					height={20}
					aria-hidden="true"
				/>
			</a>
		</div>
	</div>
	<video
		id="hero-video"
		playsinline
		autoplay
		loop
		muted
		preload="auto"
		poster={optimizedBannerPoster.src}
		class="absolute inset-0 z-10 w-auto min-w-full min-h-full max-w-none"
	>
		<source src={heroVideo} type="video/mp4">
	</video>
</header>

<script>
	// Only show video if user hasn't requested reduced motion
	if (typeof window !== "undefined") {
		const video = document.getElementById("hero-video");
		if (video && window.matchMedia("(prefers-reduced-motion)").matches) {
			video.style.display = "none";
		}
	}
</script>
